zabbix_export:
  version: '6.0'
  date: '2026-01-27T17:00:00Z'
  groups:
    - uuid: 68ac6ad7706f4023b09660419fe47892
      name: 'Templates/Applications'
  templates:
    - uuid: b6d64f2d67824356bd492f81c640fbf2
      template: 'Template Mocha Selenium Tests'
      name: 'Template Mocha Selenium Tests'
      description: |
        Monitors Mocha test results via mochawesome JSON reports.
        Tests are executed externally via systemd timer.
        
        Requirements:
        - multiflexi-zabbix-selenium package installed
        - Tests configured and timer enabled
      groups:
        - name: 'Templates/Applications'
      items:
        - uuid: d045a49a24e64b6b9b8e439b3365167a
          name: 'Mocha: Total tests'
          type: ZABBIX_ACTIVE
          key: mocha.tests[total]
          delay: 5m
          history: 7d
          trends: 90d
          description: 'Total number of tests in last run'
          tags:
            - tag: Application
              value: 'Mocha Tests'
        
        - uuid: 826655279d0246c38fbea5d2f4fdeb30
          name: 'Mocha: Passed tests'
          type: ZABBIX_ACTIVE
          key: mocha.tests[passed]
          delay: 5m
          history: 7d
          trends: 90d
          description: 'Number of passed tests'
          tags:
            - tag: Application
              value: 'Mocha Tests'
        
        - uuid: 36ea6459733549d7930ca7ea6e6fba33
          name: 'Mocha: Failed tests'
          type: ZABBIX_ACTIVE
          key: mocha.tests[failed]
          delay: 5m
          history: 7d
          trends: 90d
          description: 'Number of failed tests'
          tags:
            - tag: Application
              value: 'Mocha Tests'
          triggers:
            - uuid: 13133790169741609652f4b43ef45057
              expression: 'last(/Template Mocha Selenium Tests/mocha.tests[failed])>0'
              name: 'Mocha: Tests are failing'
              priority: WARNING
              description: 'One or more Selenium tests have failed'
        
        - uuid: fcee70d9c3bf42ff951d3a3888f9fdc2
          name: 'Mocha: Pending tests'
          type: ZABBIX_ACTIVE
          key: mocha.tests[pending]
          delay: 5m
          history: 7d
          trends: 90d
          description: 'Number of skipped/pending tests'
          tags:
            - tag: Application
              value: 'Mocha Tests'
        
        - uuid: 0706ab24ae484950a9aa588126c0980e
          name: 'Mocha: Test duration'
          type: ZABBIX_ACTIVE
          key: mocha.tests[duration]
          delay: 5m
          history: 7d
          trends: 90d
          units: ms
          description: 'Total test execution time in milliseconds'
          tags:
            - tag: Application
              value: 'Mocha Tests'
        
        - uuid: a6ec1d9b8e6a4a53adfcb4ce4736e8b5
          name: 'Mocha: Report age'
          type: ZABBIX_ACTIVE
          key: mocha.tests[age]
          delay: 1m
          history: 7d
          trends: 90d
          units: unixtime
          description: 'Timestamp of last test report'
          tags:
            - tag: Application
              value: 'Mocha Tests'
          triggers:
            - uuid: e172eb2b2eaf4c24b54797efe5691a7c
              expression: 'now()-last(/Template Mocha Selenium Tests/mocha.tests[age])>3600'
              name: 'Mocha: Test results are outdated'
              priority: AVERAGE
              description: 'No fresh test results in the last hour. Check if systemd timer is running.'
            
            - uuid: ff71bc56b19c47c0982303a345f07bb4
              expression: 'now()-last(/Template Mocha Selenium Tests/mocha.tests[age])>7200'
              name: 'Mocha: Test results are critically outdated'
              priority: HIGH
              description: 'No fresh test results in the last 2 hours. Test execution may be broken.'
        
        - uuid: 83fcb5179aaf460fb000220993aa6d3a
          name: 'Mocha: Success rate'
          type: CALCULATED
          key: mocha.success_rate
          delay: 5m
          history: 7d
          trends: 90d
          value_type: FLOAT
          units: '%'
          params: '100*last(//mocha.tests[passed])/last(//mocha.tests[total])'
          description: 'Percentage of passed tests'
          tags:
            - tag: Application
              value: 'Mocha Tests'
          triggers:
            - uuid: 4f9b53dfda0b4b4a8ffcb44b460ebcaa
              expression: 'last(/Template Mocha Selenium Tests/mocha.success_rate)<90'
              name: 'Mocha: Success rate below 90%'
              priority: HIGH
              description: 'Test success rate has dropped below 90%'
            
            - uuid: 89dbdd27ede240fb9c46672a4711c9c1
              expression: 'last(/Template Mocha Selenium Tests/mocha.success_rate)<50'
              name: 'Mocha: Success rate critically low'
              priority: DISASTER
              description: 'More than half of the tests are failing'
